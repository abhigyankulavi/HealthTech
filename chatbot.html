<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Disease Prediction</title>
    <style>
        .chat-container {
            max-width: 800px;
            margin: 2rem auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .chat-header {
            background: #2563eb;
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .messages {
            height: 400px;
            overflow-y: auto;
            padding: 1rem;
        }

        .message {
            margin-bottom: 1rem;
            display: flex;
            gap: 0.5rem;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-content {
            max-width: 80%;
            padding: 0.75rem;
            border-radius: 8px;
        }

        .bot .message-content {
            background: #eff6ff;
        }

        .user .message-content {
            background: #f0fdf4;
        }

        .input-area {
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            gap: 0.5rem;
        }

        .input-area input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
        }

        .input-area button {
            padding: 0.75rem 1.5rem;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .input-area button:hover {
            background: #1d4ed8;
        }

        .disclaimer {
            max-width: 800px;
            margin: 1rem auto;
            text-align: center;
            color: #64748b;
            font-size: 0.875rem;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
            <h1>Health Assistant</h1>
        </div>
        <div class="messages" id="messages"></div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Describe your symptoms...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>
    <div class="disclaimer">
        ⚠️ This is a demo application and should not be used for actual medical diagnosis.
        Always consult with qualified healthcare professionals for medical advice.
    </div>

    <script>
        // Disease database
        const diseases = [
            {
                name: "Common Cold",
                symptoms: ["runny nose", "sore throat", "cough", "congestion", "mild fever", "sneezing"],
                description: "A viral infection of the upper respiratory tract."
            },
            {
                name: "Influenza",
                symptoms: ["high fever", "body aches", "fatigue", "headache", "dry cough", "chills"],
                description: "A viral infection that attacks your respiratory system."
            },
            {
                name: "Migraine",
                symptoms: ["severe headache", "nausea", "sensitivity to light", "sensitivity to sound", "visual disturbances"],
                description: "A headache disorder characterized by recurrent headaches."
            },
            {
                name: "Food Poisoning",
                symptoms: ["nausea", "vomiting", "diarrhea", "stomach cramps", "fever", "weakness"],
                description: "Illness caused by eating contaminated food."
            },
            {
                name: "Allergic Rhinitis",
                symptoms: ["sneezing", "runny nose", "itchy eyes", "congestion", "watery eyes"],
                description: "Inflammation of the nasal passages caused by allergies."
            }
        ];

        // Add initial bot message
        window.onload = function() {
            addMessage("Hello! I'm your health assistant. Please describe your symptoms, and I'll try to help identify possible conditions. Remember, this is just a preliminary assessment and should not replace professional medical advice.", true);
        };

        function predictDisease(userSymptoms) {
            const userSymptomsList = userSymptoms.toLowerCase().split(/[,.]/).map(s => s.trim());
            
            const predictions = diseases.map(disease => {
                const matchedSymptoms = disease.symptoms.filter(symptom =>
                    userSymptomsList.some(userSymptom => 
                        userSymptom.includes(symptom) || symptom.includes(userSymptom)
                    )
                );

                const accuracy = (matchedSymptoms.length / disease.symptoms.length) * 100;
                return { disease, accuracy };
            });

            const sortedPredictions = predictions
                .filter(p => p.accuracy > 0)
                .sort((a, b) => b.accuracy - a.accuracy);

            if (sortedPredictions.length === 0) {
                return "I couldn't identify any specific conditions based on the symptoms you described. Please provide more details or consult a healthcare professional.";
            }

            const topPrediction = sortedPredictions[0];
            const predictionsText = sortedPredictions
                .map(({ disease, accuracy }) => 
                    `${disease.name} (${accuracy.toFixed(1)}% confidence)\n${disease.description}`
                )
                .join('\n\n');

            return `Based on your symptoms, I predict:\n\n${predictionsText}\n\n${
                topPrediction.accuracy < 90 
                    ? "⚠️ Since the accuracy is below 90%, it's strongly recommended to consult a healthcare professional for a proper diagnosis."
                    : "While this prediction has high accuracy, it's always good to consult with a healthcare professional for confirmation."
            }`;
        }

        function addMessage(text, isBot) {
            const messagesDiv = document.getElementById('messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isBot ? 'bot' : 'user'}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerText = text;
            
            messageDiv.appendChild(contentDiv);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (message) {
                addMessage(message, false);
                const response = predictDisease(message);
                addMessage(response, true);
                input.value = '';
            }
        }

        // Allow sending message with Enter key
        document.getElementById('userInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
